<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GEMINI_V16_FINAL_ALL_IN_ONE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
        :root { --neon: #00ff41; --bg: #000; }
        body { background: var(--bg); color: var(--neon); font-family: 'Share Tech Mono', monospace; height: 100dvh; display: flex; flex-direction: column; overflow: hidden; }
        .hacker-border { border: 1px solid rgba(0, 255, 65, 0.4); background: rgba(0, 10, 0, 0.9); }
        .progress-bar { height: 4px; background: #002200; border-radius: 2px; overflow: hidden; margin-top: 8px; }
        #progressFill { height: 100%; width: 0%; background: var(--neon); box-shadow: 0 0 10px var(--neon); transition: width 0.2s; }
        #vid { width: 100%; border-radius: 4px; display: none; border: 1px solid #00441b; margin-top: 8px; }
        .log-stream { font-size: 9px; color: #008f11; line-height: 1.2; height: 100px; overflow-y: auto; border-top: 1px solid #111; padding-top: 5px; }
        .scan-anim { position: absolute; inset: 0; background: linear-gradient(transparent, rgba(0,255,65,0.1), transparent); background-size: 100% 40px; animation: scan 1.5s linear infinite; display: none; pointer-events: none; }
        @keyframes scan { from { background-position: 0 0; } to { background-position: 0 100%; } }
    </style>
</head>
<body class="p-3">

    <header class="flex justify-between items-center mb-3 border-b border-green-900 pb-2">
        <div class="flex items-center gap-2">
            <i data-lucide="shield-check" class="text-green-500"></i>
            <h1 class="text-xs font-bold tracking-[0.3em] uppercase">ALL_IN_ONE_v16</h1>
        </div>
        <div class="text-[9px] bg-green-950 px-2 py-1 rounded border border-green-500/30">ENGINE_STABLE</div>
    </header>

    <div class="flex-grow overflow-y-auto space-y-3 pr-1">
        
        <div class="hacker-border p-4 rounded-lg relative overflow-hidden">
            <div id="scanAnim" class="scan-anim"></div>
            <label class="text-[10px] opacity-50 uppercase block mb-1">Payload_Source</label>
            <input type="file" id="videoInp" accept="video/*" class="hidden" onchange="loadTarget(this)">
            <button onclick="document.getElementById('videoInp').click()" class="w-full bg-green-900/10 border border-green-500/30 py-6 font-bold text-xs flex flex-col items-center gap-2 hover:bg-green-500/10">
                <i data-lucide="upload-cloud" class="w-6 h-6"></i>
                <span>SELECT MP4 VIDEO (FOR 50-FRAME DEEP SCAN)</span>
            </button>
            <video id="vid" muted playsinline></video>
            <div class="progress-bar"><div id="progressFill"></div></div>
            <div id="statusText" class="text-[8px] text-right mt-1 opacity-50">Ready.</div>
        </div>

        <div id="terminal" class="log-stream font-mono scrollbar-hide">
            <div>> System initialized. AIzaSyDs...L1dLcE integrated.</div>
            <div>> Model path: gemini-1.5-flash (v1beta stable)</div>
        </div>

        <button id="crackBtn" onclick="executeMegaScan()" class="hidden w-full bg-green-600 text-black py-4 font-black rounded uppercase text-sm shadow-[0_0_20px_rgba(0,255,65,0.3)] active:scale-95 transition-all">
            Execute 50-Frame Master Crack
        </button>

        <div id="report" class="hacker-border p-4 rounded-lg min-h-[160px] text-xs leading-relaxed mb-10 overflow-y-auto max-h-[300px]">
            <div class="opacity-20 italic text-center mt-10">AWAITING SYSTEM TRIGGER...</div>
        </div>
    </div>

    <canvas id="procCanvas" style="display:none;"></canvas>

    <script>
        lucide.createIcons();
        
        // --- MASTER CONFIG ---
        const API_KEY = "AIzaSyDsRjt-EHNElnlv3SbPN1HCM22RrL1dLcE";
        const ENDPOINT = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;

        function log(m, err = false) {
            const t = document.getElementById('terminal');
            t.innerHTML += `<div class="${err ? 'text-red-500' : 'text-green-600'}">> ${m}</div>`;
            t.scrollTop = t.scrollHeight;
        }

        function loadTarget(input) {
            if(!input.files[0]) return;
            const v = document.getElementById('vid');
            v.src = URL.createObjectURL(input.files[0]);
            v.style.display = 'block';
            v.onloadedmetadata = () => {
                document.getElementById('crackBtn').classList.remove('hidden');
                log("TARGET_LOCKED: " + v.duration.toFixed(1) + "s Video Payload.");
            };
        }

        async function executeMegaScan() {
            const v = document.getElementById('vid');
            const btn = document.getElementById('crackBtn');
            const bar = document.getElementById('progressFill');
            const canv = document.getElementById('procCanvas');
            const ctx = canv.getContext('2d');
            const report = document.getElementById('report');

            btn.disabled = true;
            btn.innerText = "CRACKING...";
            document.getElementById('scanAnim').style.display = 'block';
            report.innerHTML = "<div class='text-green-500 animate-pulse text-center mt-10 tracking-tighter'>DEEP_SCANNING_50_FRAMES...</div>";

            const frames = [];
            const steps = 50;
            const gap = v.duration / (steps + 1);

            try {
                for(let i=1; i<=steps; i++) {
                    v.currentTime = i * gap;
                    await new Promise(r => v.onseeked = r);
                    
                    // Optimization: 512px width ensures no payload error with 50 images
                    const targetW = 512;
                    const scale = targetW / v.videoWidth;
                    canv.width = targetW;
                    canv.height = v.videoHeight * scale;
                    
                    ctx.drawImage(v, 0, 0, canv.width, canv.height);
                    frames.push(canv.toDataURL('image/jpeg', 0.3).split(',')[1]);
                    
                    bar.style.width = (i/steps)*100 + '%';
                    document.getElementById('statusText').innerText = `Buffer: ${i}/50 Frames`;
                    if(i % 10 === 0) log(`BUFFERING_LOG: Frame ${i} captured.`);
                }

                log("TRANSMITTING: Neural Analysis in progress...");

                const payload = {
                    contents: [{
                        parts: [
                            { text: "CRITICAL: You are an expert code cracker. Look at these 50 frames. Find any password, zip key, or secret code shown on screen. Scan every pixel. If parts of the code appear in different frames, combine them. ONLY output the code or 'NOT_FOUND'." },
                            ...frames.map(f => ({ inline_data: { mime_type: "image/jpeg", data: f } }))
                        ]
                    }]
                };

                const res = await fetch(ENDPOINT, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload)
                });

                const data = await res.json();
                if(data.error) throw new Error(data.error.message);

                const result = data.candidates[0].content.parts[0].text;
                report.innerHTML = `<div class="text-red-500 font-bold mb-2 underline">[CRACK_REPORT_SUCCESS]</div><div class="text-white bg-green-950/20 p-3 border border-green-500/20">${result}</div>`;
                log("DECRYPTION_COMPLETE: Signal verified.");

            } catch(e) {
                log("FATAL_ERROR: " + e.message, true);
                report.innerHTML = `<div class="text-red-500 uppercase font-black">X99_CRITICAL_FAILURE:</div><div class="text-[10px] text-white mt-1">${e.message}</div>`;
            } finally {
                btn.disabled = false;
                btn.innerText = "Execute 50-Frame Master Crack";
                document.getElementById('scanAnim').style.display = 'none';
            }
        }
    </script>
</body>
</html>
