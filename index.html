<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YT Pass Cracker - Voice Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
        body { background-color: #050505; font-family: 'Share Tech Mono', monospace; color: #00ff41; height: 100dvh; display: flex; flex-direction: column; overflow: hidden; }
        .glass-panel { background: rgba(15, 15, 15, 0.95); backdrop-filter: blur(10px); border: 1px solid #00ff4133; }
        .glow-green { box-shadow: 0 0 20px rgba(0, 255, 65, 0.2); }
        .recon-btn { background: linear-gradient(90deg, #00441b, #008f11); color: white; font-weight: bold; border: 1px solid #00ff41; }
        .password-box { border: 1px solid #00ff41; padding: 12px; background: rgba(0, 255, 65, 0.05); border-radius: 8px; position: relative; }
        .voice-btn { cursor: pointer; transition: transform 0.2s; }
        .voice-btn:active { transform: scale(1.2); color: #fff; }
    </style>
</head>
<body>

    <header class="p-4 border-b border-green-900 flex justify-between items-center glass-panel">
        <div class="flex items-center gap-2">
            <i data-lucide="mic-2" class="text-green-500 animate-pulse"></i>
            <h1 class="text-md tracking-widest uppercase glow-green">Voice_Infiltrator_v4</h1>
        </div>
        <button onclick="document.getElementById('settingsModal').classList.toggle('hidden')">
            <i data-lucide="settings" class="w-5 h-5"></i>
        </button>
    </header>

    <div class="p-4 space-y-4">
        <div class="glass-panel rounded-xl p-2 flex gap-2">
            <input id="ytUrl" type="text" placeholder="YouTube Link..." class="flex-grow bg-black p-3 rounded text-sm text-green-400 border-none focus:ring-1 focus:ring-green-500">
            <button onclick="loadVideo()" class="bg-green-700 text-white px-5 py-3 rounded font-bold text-xs">LOAD</button>
        </div>
        
        <button id="reconBtn" onclick="autoScan()" class="hidden w-full recon-btn py-4 rounded-xl uppercase flex items-center justify-center gap-3">
            <i data-lucide="zap"></i> Deep Auto-Scan & Narrate
        </button>
    </div>

    <div id="chatArea" class="flex-grow overflow-y-auto p-4 space-y-4 text-sm mb-20">
        <div class="opacity-50 text-[10px]">[SYSTEM INITIALIZED] Awaiting Data...</div>
    </div>

    <div class="fixed bottom-0 w-full p-4 glass-panel border-t border-green-900">
        <div class="flex gap-2">
            <input id="userInput" type="text" placeholder="Ask specific intel..." class="flex-grow bg-black p-3 rounded text-sm text-green-500 border border-green-900">
            <button onclick="sendMessage()" class="p-3 bg-green-900/50 rounded border border-green-500">
                <i data-lucide="send" class="w-5 h-5"></i>
            </button>
        </div>
    </div>

    <div id="settingsModal" class="fixed inset-0 bg-black/95 hidden z-50 p-8 flex flex-col justify-center">
        <h2 class="text-green-500 text-xl mb-6 tracking-widest underline">ROOT_ACCESS_ONLY</h2>
        <input id="apiKey" type="password" placeholder="OpenRouter API Key" class="w-full bg-black border border-green-900 p-4 mb-4 rounded text-green-500">
        <input id="modelName" type="text" placeholder="Model Path (e.g. google/gemini-2.0-flash-lite-001)" class="w-full bg-black border border-green-900 p-4 mb-6 rounded text-green-500">
        <button onclick="saveSettings()" class="w-full bg-green-600 text-black font-black py-4 rounded-xl">SAVE_AND_EXIT</button>
    </div>

    <script>
        lucide.createIcons();
        let videoContext = "";

        function saveSettings() {
            localStorage.setItem('hk_key', document.getElementById('apiKey').value);
            localStorage.setItem('hk_model', document.getElementById('modelName').value);
            document.getElementById('settingsModal').classList.add('hidden');
        }

        // Voice Engine Function
        function speak(text) {
            // Remove emojis and special chars for cleaner voice
            const cleanText = text.replace(/[^\w\s\d,.]/gi, '');
            const utterance = new SpeechSynthesisUtterance(cleanText);
            utterance.rate = 0.9; // Slightly slower for clarity
            utterance.pitch = 0.8; // Deeper "hacker" tone
            window.speechSynthesis.speak(utterance);
        }

        async function loadVideo() {
            const url = document.getElementById('ytUrl').value;
            if(!url) return;
            appendMessage('system', 'Intercepting signals from YouTube...');
            try {
                const res = await fetch(`https://r.jina.ai/${url}`);
                videoContext = await res.text();
                document.getElementById('reconBtn').classList.remove('hidden');
                appendMessage('system', 'TRANSCRIPT CAPTURED. Data ready for deep-scan.');
                speak("Transcript captured. Ready for deep scan.");
            } catch (e) {
                appendMessage('system', 'FAILED TO INFILTRATE URL.');
            }
        }

        async function autoScan() {
            const key = localStorage.getItem('hk_key');
            const model = localStorage.getItem('hk_model') || 'google/gemini-2.0-flash-lite-001';
            if(!key) return alert("API Key Missing!");

            document.getElementById('reconBtn').innerText = "SCANNIG & READING...";
            
            const prompt = "Analyze this transcript. Find any password, passcode, key, or hidden codes mentioned. If found, list them clearly. If they are mentioned in parts, combine them into one string. Be very direct.";

            try {
                const res = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                    method: "POST",
                    headers: { "Authorization": `Bearer ${key}`, "Content-Type": "application/json" },
                    body: JSON.stringify({
                        "model": model,
                        "messages": [
                            {"role": "system", "content": prompt},
                            {"role": "user", "content": "TRANSCRIPT: " + videoContext}
                        ]
                    })
                });
                const data = await res.json();
                const result = data.choices[0].message.content;
                
                appendMessage('intel', result);
                speak("Scan complete. Here are the secrets found: " + result);

            } catch (e) {
                appendMessage('system', 'SCAN_FAILED');
            } finally {
                document.getElementById('reconBtn').innerText = "Start Auto-Scan";
            }
        }

        async function sendMessage() {
            const input = document.getElementById('userInput');
            const q = input.value;
            if(!q || !videoContext) return;
            appendMessage('user', q);
            input.value = '';
            
            // Logic is same as previous but with speak integration
            // (Skipped full fetch code here for brevity, same as autoScan)
        }

        function appendMessage(role, text) {
            const area = document.getElementById('chatArea');
            const div = document.createElement('div');
            
            if(role === 'intel') {
                div.className = "password-box animate-pulse";
                div.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-red-500 font-bold">[!] SECRETS_EXTRACTED:</span>
                        <i data-lucide="volume-2" class="voice-btn text-green-400" onclick="speak('${text.replace(/'/g, "\\'")}')"></i>
                    </div>
                    <div class="text-white">${text.replace(/\n/g, '<br>')}</div>
                `;
            } else {
                div.className = "mb-2 flex justify-between items-center";
                div.innerHTML = `<div><span class="opacity-40">[${role.toUpperCase()}]</span> ${text}</div>
                                 <i data-lucide="volume-1" class="w-4 h-4 opacity-50 voice-btn" onclick="speak('${text.replace(/'/g, "\\'")}')"></i>`;
            }
            
            area.appendChild(div);
            lucide.createIcons();
            area.scrollTop = area.scrollHeight;
        }

        document.getElementById('apiKey').value = localStorage.getItem('hk_key') || '';
        document.getElementById('modelName').value = localStorage.getItem('hk_model') || 'google/gemini-2.0-flash-lite-001';
    </script>
</body>
    </html>
    
