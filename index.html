<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GEMINI_V14_ULTRA_MAX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
        body { background: #000; color: #00ff41; font-family: 'Share Tech Mono', monospace; height: 100dvh; display: flex; flex-direction: column; overflow: hidden; }
        .hacker-border { border: 1px solid rgba(0, 255, 65, 0.5); background: rgba(0, 20, 0, 0.9); box-shadow: 0 0 15px rgba(0, 255, 65, 0.2); }
        .progress-container { height: 6px; background: #002200; border-radius: 3px; margin: 10px 0; overflow: hidden; }
        #fill { height: 100%; width: 0%; background: #00ff41; transition: width 0.3s; box-shadow: 0 0 10px #00ff41; }
        #vid { width: 100%; border-radius: 4px; display: none; border: 1px solid #00441b; margin-top: 10px; }
        .glitch-text { animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }
    </style>
</head>
<body class="p-4">

    <header class="flex justify-between items-center mb-4 border-b border-green-900 pb-2">
        <div class="flex items-center gap-2">
            <i data-lucide="terminal" class="text-green-500"></i>
            <h1 class="text-xs font-bold tracking-[0.3em] uppercase glitch-text">CORE_ENGINE_V14</h1>
        </div>
        <div class="text-[9px] font-bold text-green-400 bg-green-900/40 px-2 py-1 rounded">API_LOCKED</div>
    </header>

    <div class="flex-grow overflow-y-auto space-y-4 pr-1">
        
        <div class="hacker-border p-5 rounded-lg relative">
            <label class="text-[10px] opacity-60 uppercase block mb-3 font-bold">Target Payload: Video</label>
            <input type="file" id="vidInp" accept="video/*" class="hidden" onchange="initVid(this)">
            <button onclick="document.getElementById('vidInp').click()" class="w-full bg-green-900/20 border border-green-500/40 py-8 font-black text-xs flex flex-col items-center gap-3 hover:bg-green-500/10 transition-all">
                <i data-lucide="scan-eye" class="w-8 h-8"></i>
                <span>UPLOAD 2MIN VIDEO (50-FRAME DEEP SCAN)</span>
            </button>
            <video id="vid" muted playsinline></video>
            
            <div class="progress-container"><div id="fill"></div></div>
            <div id="frameCounter" class="text-[9px] text-right mt-1 opacity-70 italic">Frames: 0/50</div>
        </div>

        <div id="logs" class="bg-black p-3 rounded border border-green-900/30 h-32 text-[9px] font-mono leading-relaxed overflow-y-auto scrollbar-hide">
            <div class="text-green-800">> Initializing neural network...</div>
            <div class="text-green-800">> API Key: AIzaSyDsRjt...L1dLcE integrated.</div>
            <div class="text-green-800">> Ready for high-intensity frame analysis.</div>
        </div>

        <button id="mainBtn" onclick="runScan()" class="hidden w-full bg-green-600 text-black py-5 font-black rounded uppercase text-sm shadow-[0_0_30px_rgba(0,255,65,0.3)] hover:brightness-110 active:scale-95 transition-all">
            EXECUTE DEEP CRACK (50 FRAMES)
        </button>

        <div id="intel" class="hacker-border p-4 rounded-lg min-h-[200px] text-xs leading-relaxed mb-10 bg-black/50">
            <div class="opacity-30 italic font-bold tracking-widest text-center mt-10">AWAITING SYSTEM COMMAND...</div>
        </div>
    </div>

    <canvas id="canvas" style="display:none;"></canvas>

    <script>
        lucide.createIcons();
        
        // --- UPDATED API CONFIG ---
        const KEY = "AIzaSyDsRjt-EHNElnlv3SbPN1HCM22RrL1dLcE";
        const ENDPOINT = "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=" + KEY;

        function addLog(m, type = 'info') {
            const l = document.getElementById('logs');
            const color = type === 'err' ? 'text-red-500' : 'text-green-500';
            l.innerHTML += `<div class="${color}">> ${m}</div>`;
            l.scrollTop = l.scrollHeight;
        }

        function initVid(input) {
            if(!input.files[0]) return;
            const v = document.getElementById('vid');
            v.src = URL.createObjectURL(input.files[0]);
            v.style.display = 'block';
            v.onloadedmetadata = () => {
                document.getElementById('mainBtn').classList.remove('hidden');
                addLog(`TARGET_LOCKED: ${v.duration.toFixed(1)}s Video detected.`);
            };
        }

        async function runScan() {
            const v = document.getElementById('vid');
            const btn = document.getElementById('mainBtn');
            const bar = document.getElementById('fill');
            const count = document.getElementById('frameCounter');
            const canv = document.getElementById('canvas');
            const ctx = canv.getContext('2d');
            const intel = document.getElementById('intel');

            btn.disabled = true;
            btn.innerText = "CRACKING IN PROGRESS...";
            intel.innerHTML = "<div class='text-green-500 animate-pulse text-center mt-10'>[SYSTEM]: Extracting 50 unique frames for analysis...</div>";

            const frames = [];
            const steps = 50; 
            const gap = v.duration / (steps + 1);

            try {
                for(let i=1; i<=steps; i++) {
                    v.currentTime = i * gap;
                    await new Promise(r => v.onseeked = r);
                    
                    // Optimal scaling for 50-frame request
                    const targetW = 600; 
                    const scale = targetW / v.videoWidth;
                    canv.width = targetW;
                    canv.height = v.videoHeight * scale;
                    
                    ctx.drawImage(v, 0, 0, canv.width, canv.height);
                    frames.push(canv.toDataURL('image/jpeg', 0.4).split(',')[1]);
                    
                    const progress = (i / steps) * 100;
                    bar.style.width = progress + '%';
                    count.innerText = `Frames: ${i}/${steps}`;
                    
                    if(i % 10 === 0) addLog(`PROCESS: ${i} frames buffered...`);
                }

                addLog("TRANSMITTING: Sending payload to Gemini Vision...");

                const payload = {
                    contents: [{
                        parts: [
                            { text: "STRICT INSTRUCTION: These are 50 frames from a video. Find the password or secret key. Scan every frame carefully. If the password appears for even one frame, extract it. Output ONLY the password. If multiple codes exist, list them all." },
                            ...frames.map(f => ({ inline_data: { mime_type: "image/jpeg", data: f } }))
                        ]
                    }]
                };

                const res = await fetch(ENDPOINT, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload)
                });

                const data = await res.json();
                if(data.error) throw new Error(data.error.message);

                const finalResult = data.candidates[0].content.parts[0].text;
                intel.innerHTML = `<div class="text-red-500 font-black mb-3 border-b border-red-900 pb-1">[CRACK_REPORT_SUCCESS]</div><div class="text-white bg-green-950/20 p-3 rounded border border-green-500/20">${finalResult.replace(/\n/g, '<br>')}</div>`;
                addLog("TASK_COMPLETE: Intelligence extracted.");

            } catch(e) {
                addLog("FATAL_ERROR: " + e.message, 'err');
                intel.innerHTML = `<div class="text-red-600 font-bold underline">ERROR_CODE_X99:</div><div class="text-[10px] mt-2">${e.message}</div>`;
            } finally {
                btn.disabled = false;
                btn.innerText = "EXECUTE DEEP CRACK (50 FRAMES)";
            }
        }
    </script>
</body>
</html>
