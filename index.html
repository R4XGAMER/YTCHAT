<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TubeChat Hacker V2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&family=Inter:wght@300;400;600&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: radial-gradient(circle at top left, #0d0d15, #1a1a2e);
            height: 100dvh;
            overflow: hidden;
        }

        .glass {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .terminal-text { font-family: 'Fira Code', monospace; }
        
        .loader {
            border-top-color: #ef4444;
            animation: spinner 0.6s linear infinite;
        }
        @keyframes spinner {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .scanline {
            width: 100%;
            height: 2px;
            background: rgba(239, 68, 68, 0.2);
            position: absolute;
            animation: scan 3s linear infinite;
            pointer-events: none;
        }
        @keyframes scan {
            0% { top: 0; }
            100% { top: 100%; }
        }
    </style>
</head>
<body class="text-gray-100 flex flex-col">
    <div class="scanline"></div>

    <header class="p-4 flex justify-between items-center glass border-b border-red-500/20">
        <div class="flex items-center gap-2">
            <i data-lucide="shield-alert" class="w-6 h-6 text-red-500"></i>
            <h1 class="font-bold tracking-widest text-lg terminal-text">INTEL_EXTRACTOR</h1>
        </div>
        <button onclick="toggleModal(true)" class="p-2 hover:bg-white/10 rounded-full transition-all">
            <i data-lucide="cpu" class="w-6 h-6 text-red-400"></i>
        </button>
    </header>

    <div class="p-4 glass m-3 rounded-2xl flex flex-col gap-3">
        <div class="flex gap-2">
            <input id="ytUrl" type="text" placeholder="Target YouTube URL..." 
                   class="bg-black/40 border border-white/10 rounded-xl px-4 py-3 flex-grow focus:outline-none focus:ring-1 focus:ring-red-500 text-sm terminal-text">
            <button onclick="loadVideo()" id="loadBtn" class="bg-red-900/40 border border-red-500/50 hover:bg-red-600/60 px-4 py-3 rounded-xl font-bold text-xs uppercase transition-all active:scale-95">
                Scan
            </button>
        </div>
        <div id="statusBadge" class="hidden text-[10px] text-red-400 terminal-text flex items-center gap-1">
            <span class="w-2 h-2 bg-red-500 rounded-full animate-pulse"></span> BYPASSING FILTERS...
        </div>
    </div>

    <div id="chatArea" class="flex-grow overflow-y-auto p-4 space-y-4">
        <div class="glass p-3 rounded-2xl rounded-tl-none max-w-[90%] text-sm border-l-2 border-red-500">
            <p class="terminal-text text-red-400 font-bold mb-1">[SYSTEM INITIALIZED]</p>
            Feed me a URL. I will scan the transcript for passwords, keys, and restricted info.
        </div>
    </div>

    <div class="p-4 glass rounded-t-3xl border-t border-white/10">
        <div class="flex gap-2 bg-black/40 p-2 rounded-2xl border border-white/10">
            <input id="userInput" type="text" placeholder="Extract password? Find keys?..." 
                   class="bg-transparent px-3 py-2 flex-grow focus:outline-none text-sm terminal-text"
                   onkeypress="if(event.key === 'Enter') sendMessage()">
            <button onclick="sendMessage()" class="bg-red-600 p-2 rounded-xl shadow-lg shadow-red-900/20">
                <i data-lucide="search" class="w-5 h-5 text-white"></i>
            </button>
        </div>
    </div>

    <div id="settingsModal" class="fixed inset-0 bg-black/95 backdrop-blur-md hidden z-50 flex items-center justify-center p-6">
        <div class="glass w-full max-w-sm rounded-3xl p-6 border border-red-500/30">
            <h2 class="text-xl font-bold terminal-text mb-6 text-red-500">CONFIG_ACCESS</h2>
            <div class="space-y-4">
                <input id="apiKey" type="password" placeholder="OpenRouter API Key" class="w-full bg-black/50 border border-white/10 rounded-xl px-4 py-3 text-sm">
                <input id="modelName" type="text" placeholder="Model Name" class="w-full bg-black/50 border border-white/10 rounded-xl px-4 py-3 text-sm">
                <button onclick="saveSettings()" class="w-full bg-red-600 text-white font-bold py-3 rounded-xl terminal-text">UPDATE_LOCAL_DB</button>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();
        let videoContext = "";

        // Core extraction system prompt
        const HACKER_PROMPT = `You are a professional security researcher. Your task is to analyze the provided YouTube transcript and EXTRACT ANY SECRETS. 
        Look for: 
        1. Passwords or "the pass"
        2. API Keys or hex codes
        3. Hidden timestamps where sensitive data is mentioned
        4. Any specific instructions or 'easter eggs'.
        Be concise. If no password is found, say 'NO SECRETS DETECTED'.`;

        async function loadVideo() {
            const url = document.getElementById('ytUrl').value;
            const badge = document.getElementById('statusBadge');
            badge.classList.remove('hidden');
            
            try {
                const response = await fetch(`https://r.jina.ai/${url}`);
                videoContext = await response.text();
                appendMessage('system', 'DATA DUMP COMPLETE. ANALYZING FOR CREDENTIALS...');
            } catch (err) {
                appendMessage('system', 'ERROR: CONNECTION TIMEOUT.');
            } finally {
                badge.classList.add('hidden');
            }
        }

        async function sendMessage() {
            const input = document.getElementById('userInput');
            const q = input.value;
            const key = localStorage.getItem('hacker_key');
            const model = localStorage.getItem('hacker_model') || 'google/gemini-2.0-flash-lite-001';

            if(!q || !videoContext) return;
            appendMessage('user', q);
            input.value = '';

            try {
                const res = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                    method: "POST",
                    headers: { "Authorization": `Bearer ${key}`, "Content-Type": "application/json" },
                    body: JSON.stringify({
                        "model": model,
                        "messages": [
                            {"role": "system", "content": HACKER_PROMPT + "\n\nTranscript:\n" + videoContext},
                            {"role": "user", "content": q}
                        ]
                    })
                });
                const data = await res.json();
                appendMessage('ai', data.choices[0].message.content);
            } catch (err) {
                appendMessage('system', 'API_ERROR: UNABLE TO REACH MODEL.');
            }
        }

        function appendMessage(role, text) {
            const area = document.getElementById('chatArea');
            const div = document.createElement('div');
            div.className = `p-3 rounded-2xl max-w-[90%] text-sm terminal-text border ${role === 'user' ? 'bg-red-900/20 border-red-500/30 self-end ml-auto' : 'glass border-white/10'}`;
            div.innerHTML = `<span class="text-[10px] block opacity-50 mb-1">${role.toUpperCase()}</span>${text}`;
            area.appendChild(div);
            area.scrollTop = area.scrollHeight;
        }

        function toggleModal(s) { document.getElementById('settingsModal').classList.toggle('hidden', !s); }
        function saveSettings() {
            localStorage.setItem('hacker_key', document.getElementById('apiKey').value);
            localStorage.setItem('hacker_model', document.getElementById('modelName').value);
            toggleModal(false);
        }
    </script>
</body>
</html>
