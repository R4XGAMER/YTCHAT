<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GEMINI_VISION_FINAL_FIX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
        body { background: #020202; color: #00ff41; font-family: 'Share Tech Mono', monospace; height: 100dvh; display: flex; flex-direction: column; overflow: hidden; }
        .hacker-border { border: 1px solid rgba(0, 255, 65, 0.3); background: rgba(0, 15, 0, 0.8); }
        .scan-line { position: absolute; width: 100%; height: 2px; background: #00ff41; top: 0; animation: scan 2s linear infinite; display: none; box-shadow: 0 0 10px #00ff41; }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }
        #vid { width: 100%; border-radius: 4px; display: none; margin-top: 10px; border: 1px solid #00441b; }
        .log-text { font-size: 10px; color: #008f11; line-height: 1.2; }
    </style>
</head>
<body class="p-3">

    <header class="flex justify-between items-center mb-3 border-b border-green-900 pb-2">
        <div class="flex items-center gap-2">
            <i data-lucide="shield-check" class="text-green-500"></i>
            <h1 class="text-sm font-bold tracking-widest uppercase">AUTO_CRACKER_FINAL</h1>
        </div>
        <div class="text-[10px] bg-green-900/30 px-2 py-1 rounded text-green-400">API_ACTIVE</div>
    </header>

    <div class="flex-grow overflow-y-auto space-y-3 pr-1">
        
        <div class="hacker-border p-4 rounded-lg relative overflow-hidden">
            <div id="scanner" class="scan-line"></div>
            <label class="text-[10px] opacity-50 uppercase block mb-2">Target_Source</label>
            <input type="file" id="vidInp" accept="video/*" class="hidden" onchange="initVid(this)">
            <button onclick="document.getElementById('vidInp').click()" class="w-full bg-green-900/20 border border-green-500/50 py-4 font-bold text-xs flex items-center justify-center gap-2">
                <i data-lucide="video"></i> UPLOAD VIDEO FILE
            </button>
            <video id="vid" muted playsinline></video>
        </div>

        <div id="logs" class="bg-black/80 p-3 rounded border border-green-900/20 h-24 overflow-y-auto font-mono">
            <div class="log-text">> API Key Embedded Successfully.</div>
            <div class="log-text">> Awaiting Media Injection...</div>
        </div>

        <button id="mainBtn" onclick="runScan()" class="hidden w-full bg-green-600 text-black py-4 font-black rounded uppercase text-sm shadow-[0_0_15px_rgba(0,255,65,0.3)]">
            Start AI Deep Scan (10 Frames)
        </button>

        <div id="intel" class="hacker-border p-4 rounded-lg min-h-[150px] text-xs leading-relaxed mb-10">
            <div class="opacity-30 italic">Result output will display here...</div>
        </div>
    </div>

    <canvas id="canvas" style="display:none;"></canvas>

    <script>
        lucide.createIcons();
        
        // --- API KEY EMBEDDED HERE ---
        const MY_API_KEY = "AIzaSyBcqimHqJ6QmtiqaSEjmN0vzCG5A6ZbqYY"; 
        // -----------------------------

        function log(m, isErr = false) {
            const l = document.getElementById('logs');
            l.innerHTML += `<div class="${isErr ? 'text-red-500' : 'log-text'}">> ${m}</div>`;
            l.scrollTop = l.scrollHeight;
        }

        function initVid(input) {
            if(!input.files[0]) return;
            const v = document.getElementById('vid');
            v.src = URL.createObjectURL(input.files[0]);
            v.style.display = 'block';
            v.onloadedmetadata = () => {
                document.getElementById('mainBtn').classList.remove('hidden');
                log("VIDEO_READY: Duration " + v.duration.toFixed(1) + "s");
            };
        }

        async function runScan() {
            const v = document.getElementById('vid');
            const btn = document.getElementById('mainBtn');
            const scan = document.getElementById('scanner');
            const canv = document.getElementById('canvas');
            const ctx = canv.getContext('2d');
            const intel = document.getElementById('intel');

            btn.disabled = true;
            btn.innerText = "PROCESSING...";
            scan.style.display = 'block';
            intel.innerHTML = "<span class='animate-pulse'>Analyzing frames... please wait.</span>";

            const frames = [];
            const steps = 10;
            const gap = v.duration / (steps + 1);

            try {
                for(let i=1; i<=steps; i++) {
                    v.currentTime = i * gap;
                    await new Promise(r => v.onseeked = r);
                    
                    // Optimization: Standard size to avoid API rejection
                    const scale = 720 / v.videoWidth;
                    canv.width = 720;
                    canv.height = v.videoHeight * scale;
                    
                    ctx.drawImage(v, 0, 0, canv.width, canv.height);
                    frames.push(canv.toDataURL('image/jpeg', 0.5).split(',')[1]);
                    log(`FRAME_CAPTURED: ${i}/${steps}`);
                }

                log("UPLOADING: Handshaking with Gemini AI...");

                const payload = {
                    contents: [{
                        parts: [
                            { text: "TUM EK EXPERT HACKER HO. In 10 screenshots ko dhyan se dekho. Video mein kahin bhi password, zip code, ya secret key likhi hai? Saara data extract karo aur password batao. Agar password parts mein hai toh unhe JOD (combine) do." },
                            ...frames.map(f => ({ inline_data: { mime_type: "image/jpeg", data: f } }))
                        ]
                    }]
                };

                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${MY_API_KEY}`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload)
                });

                const data = await response.json();
                
                if(data.error) throw new Error(data.error.message);

                const result = data.candidates[0].content.parts[0].text;
                intel.innerHTML = `<div class="text-red-500 font-bold mb-2">[INTEL_FOUND]</div><div class="text-white">${result.replace(/\n/g, '<br>')}</div>`;
                log("SUCCESS: Data Decrypted.");

            } catch(e) {
                log("ERROR: " + e.message, true);
                intel.innerHTML = `<span class="text-red-500">API_ERROR: ${e.message}</span>`;
            } finally {
                btn.disabled = false;
                btn.innerText = "Start AI Deep Scan (10 Frames)";
                scan.style.display = 'none';
            }
        }
    </script>
</body>
</html>
